
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bootstrap Confidence Intervals &#8212; Intro to Applied Statistics</title>
    
  <link rel="stylesheet" href="../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="23. A/B Testing a Category Variable with 2 Levels" href="3.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  <img src="../_static/UNG.logo.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Intro to Applied Statistics</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../Introduction.html">
   Introduction to Applied Statistics
  </a>
 </li>
</ul>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../sb/01.html">
   1. Analyzing Data using Personality Variables
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../sb/02.html">
   2. Data Visualization with Bitcoin Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../sb/03.html">
   3. Writing Functions in Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../sb/04.html">
   4. Historical Stock Prices Data Set
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../sb/05.html">
   5. Subsetting Tables using World Airport Data and GIS Maps
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../sb/06.html">
   6. World Cities Data Set
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../sb/07.html">
   7. GIS Maps with National Parks Datga
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../sb/08.html">
   8. Conducting
   <span class="math notranslate nohighlight">
    \(t\)
   </span>
   -tests using Caffeine and Sleep Variables
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../sb/09.html">
   9. Functions and Subsetting using Chattahoochee National Forest Recreation Areas
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../sb/10.html">
   10. Nighthawks Version of Lab 6
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="0.html">
   20. A/B Testing Tools
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="1.html">
   21. A/B Testing Examples
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2.html">
   22. Matched Pairs Testing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="3.html">
   23. A/B Testing a Category Variable with 2 Levels
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Bootstrap Confidence Intervals
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="#put-useful-functions-in-the-cell-below">
   Put useful functions in the cell below
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="#confidence-intervals">
   Confidence Intervals
  </a>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/tests/4.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/StraightDraw/stats/master?urlpath=tree/content/tests/4.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Bootstrap Confidence Intervals
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#put-useful-functions-in-the-cell-below">
   Put useful functions in the cell below
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-1-ask-question">
     Step 1. Ask Question
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-2-get-sample-data">
     Step 2. Get Sample Data
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#select-the-data-of-interest">
     Select the data of interest
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#choose-a-test-statistic">
     Choose a test statistic
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#set-test-stat-1-for-mean-0-for-median">
     set test_stat = 1 for mean, 0 for median
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#get-a-sample-if-the-data-above-is-population-data">
       Get a sample if  the data above is population data.
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#this-sample-is-all-you-know-about-the-population-what-can-you-infer-about-the-population-from-this-sample">
     This sample is ALL you know about the population. What can you infer about the population from this sample?
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#variability-of-the-estimate-quantifying-uncertainty">
     Variability of the Estimate / Quantifying Uncertainty
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#since-all-samples-of-the-population-are-likely-to-be-different-there-is-inherent-uncertainty-in-what-we-can-infer-from-a-single-sample-of-the-population">
       Since all samples of the population are likely to be different, there is inherent uncertainty in what we can infer from a single sample of the population.
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#bootstrap">
     Bootstrap
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#assuming-that-the-sample-is-large-enough-and-that-it-is-representative-of-the-population-you-can-generate-bootstrapped-samples-by-resampling-the-original-sample-with-replacement">
       Assuming that the sample is ” large enough” , and that it is representative of the population, you can generate “bootstrapped” samples by resampling the original sample, WITH replacement.
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#confidence-intervals">
   Confidence Intervals
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#repeat-the-process-50-times">
     Repeat the process 50 times
    </a>
   </li>
  </ul>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datascience</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="o">%</span><span class="k">matplotlib</span> inline

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plots</span>
<span class="n">plots</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;fivethirtyeight&#39;</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="bootstrap-confidence-intervals">
<h1>Bootstrap Confidence Intervals<a class="headerlink" href="#bootstrap-confidence-intervals" title="Permalink to this headline">¶</a></h1>
<p>Steps:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="text-align:right head"><p></p></th>
<th class="text-align:left head"><p>Step</p></th>
<th class="text-align:left head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-align:right"><p>1.</p></td>
<td class="text-align:left"><p>Ask Question</p></td>
<td class="text-align:left"><p>What is the weight of babies born to smoking mothers?</p></td>
</tr>
<tr class="row-odd"><td class="text-align:right"><p>2.</p></td>
<td class="text-align:left"><p>Get sample data</p></td>
<td class="text-align:left"><p>Get weights of 100 babies born to smokers</p></td>
</tr>
<tr class="row-even"><td class="text-align:right"><p>3.</p></td>
<td class="text-align:left"><p>Choose a statistic</p></td>
<td class="text-align:left"><p>Mean baby weight</p></td>
</tr>
<tr class="row-odd"><td class="text-align:right"><p>4.</p></td>
<td class="text-align:left"><p>Calculate the statistic of the original sample</p></td>
<td class="text-align:left"><p>The mean weight of the 100 babies is 114 oz.</p></td>
</tr>
<tr class="row-even"><td class="text-align:right"><p>5.</p></td>
<td class="text-align:left"><p>Bootstrap the sample and calculate the statistic on the bootstrap sample</p></td>
<td class="text-align:left"><p>The mean weight of the 100 babies in bootstrap sample 1 is 115.3 oz.</p></td>
</tr>
<tr class="row-odd"><td class="text-align:right"><p>6.</p></td>
<td class="text-align:left"><p>Repeat over many bootstrap samples and record the results</p></td>
<td class="text-align:left"><p></p></td>
</tr>
<tr class="row-even"><td class="text-align:right"><p>7.</p></td>
<td class="text-align:left"><p>Plot the distrubution and observe the uncertainty inherent from samples of a given size</p></td>
<td class="text-align:left"><p></p></td>
</tr>
<tr class="row-odd"><td class="text-align:right"><p>8.</p></td>
<td class="text-align:left"><p>Find the 2.5 and 97.5 percentiles of the statistic over all of the bootstrap samples to compute a 95% confidence interval for the population parameter.</p></td>
<td class="text-align:left"><p></p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="put-useful-functions-in-the-cell-below">
<h1>Put useful functions in the cell below<a class="headerlink" href="#put-useful-functions-in-the-cell-below" title="Permalink to this headline">¶</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">sample_stat_without_replacement</span><span class="p">(</span><span class="n">table</span><span class="p">,</span><span class="n">samp_size</span><span class="p">):</span>
    <span class="n">our_sample</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">samp_size</span><span class="p">,</span> <span class="n">with_replacement</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">test_stat</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">our_sample</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">our_sample</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">sample_stat_with_replacement</span><span class="p">(</span><span class="n">sample</span><span class="p">):</span>
    <span class="n">single_sample</span> <span class="o">=</span> <span class="n">sample</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">with_replacement</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">test_stat</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">single_sample</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">single_sample</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
    
</pre></div>
</div>
</div>
</div>
<div class="section" id="step-1-ask-question">
<h2>Step 1. Ask Question<a class="headerlink" href="#step-1-ask-question" title="Permalink to this headline">¶</a></h2>
<p>What is the median weight of babies born to smokers?</p>
</div>
<div class="section" id="step-2-get-sample-data">
<h2>Step 2. Get Sample Data<a class="headerlink" href="#step-2-get-sample-data" title="Permalink to this headline">¶</a></h2>
<p>Read in the Data.  The data might be population data or sample data. Be aware of the diiference. If the data is population data, you will need to create a sample from the population data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># This is population data</span>
<span class="n">births</span> <span class="o">=</span> <span class="n">Table</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="s1">&#39;http://faculty.ung.edu/rsinn/baby.csv&#39;</span><span class="p">)</span>
<span class="n">births</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table border="1" class="dataframe">
    <thead>
        <tr>
            <th>Birth Weight</th> <th>Gestational Days</th> <th>Maternal Age</th> <th>Maternal Height</th> <th>Maternal Pregnancy Weight</th> <th>Maternal Smoker</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>120         </td> <td>284             </td> <td>27          </td> <td>62             </td> <td>100                      </td> <td>False          </td>
        </tr>
        <tr>
            <td>113         </td> <td>282             </td> <td>33          </td> <td>64             </td> <td>135                      </td> <td>False          </td>
        </tr>
        <tr>
            <td>128         </td> <td>279             </td> <td>28          </td> <td>64             </td> <td>115                      </td> <td>True           </td>
        </tr>
        <tr>
            <td>108         </td> <td>282             </td> <td>23          </td> <td>67             </td> <td>125                      </td> <td>True           </td>
        </tr>
        <tr>
            <td>136         </td> <td>286             </td> <td>25          </td> <td>62             </td> <td>93                       </td> <td>False          </td>
        </tr>
    </tbody>
</table>
<p>... (1169 rows omitted)</p></div></div>
</div>
</div>
<div class="section" id="select-the-data-of-interest">
<h2>Select the data of interest<a class="headerlink" href="#select-the-data-of-interest" title="Permalink to this headline">¶</a></h2>
<p>Select the babies born to smokers</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pop_data</span> <span class="o">=</span> <span class="n">births</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="s1">&#39;Maternal Smoker&#39;</span><span class="p">,</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;Birth Weight&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pop_data</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table border="1" class="dataframe">
    <thead>
        <tr>
            <th>Birth Weight</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>128         </td>
        </tr>
        <tr>
            <td>108         </td>
        </tr>
        <tr>
            <td>143         </td>
        </tr>
    </tbody>
</table>
<p>... (456 rows omitted)</p></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pop_mean</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">pop_data</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The mean of the population data is&#39;</span><span class="p">,</span> <span class="n">pop_mean</span> <span class="p">)</span>
<span class="n">pop_median</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">pop_data</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The median of the population data is&#39;</span><span class="p">,</span> <span class="n">pop_median</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The mean of the population data is 113.81917211328977
The median of the population data is 115.0
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="choose-a-test-statistic">
<h2>Choose a test statistic<a class="headerlink" href="#choose-a-test-statistic" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="set-test-stat-1-for-mean-0-for-median">
<h2>set test_stat = 1 for mean, 0 for median<a class="headerlink" href="#set-test-stat-1-for-mean-0-for-median" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">test_stat</span> <span class="o">=</span> <span class="mi">1</span>
<span class="c1"># test_stat = 0</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="get-a-sample-if-the-data-above-is-population-data">
<h3>Get a sample if  the data above is population data.<a class="headerlink" href="#get-a-sample-if-the-data-above-is-population-data" title="Permalink to this headline">¶</a></h3>
<p>Choose a sample size and sample WITHOUT replacement.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sample_size</span> <span class="o">=</span> <span class="mi">200</span>


<span class="n">original_sample</span> <span class="o">=</span> <span class="n">pop_data</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">sample_size</span><span class="p">,</span> <span class="n">with_replacement</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">original_sample_mean</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">original_sample</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<span class="n">original_sample_median</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">original_sample</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The mean of the sample data is&#39;</span><span class="p">,</span> <span class="n">original_sample_mean</span> <span class="p">)</span>
<span class="n">pop_median</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">pop_data</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The median of the sample data is&#39;</span><span class="p">,</span> <span class="n">original_sample_median</span><span class="p">)</span>

<span class="k">if</span> <span class="n">test_stat</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
    <span class="n">sample_stat</span> <span class="o">=</span> <span class="n">original_sample_mean</span>
    <span class="n">stat_label</span> <span class="o">=</span> <span class="s1">&#39;Means&#39;</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">sample_stat</span> <span class="o">=</span> <span class="n">original_sample_median</span>
    <span class="n">stat_label</span> <span class="o">=</span> <span class="s1">&#39;Medians&#39;</span>
        
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The mean of the sample data is 113.24
The median of the sample data is 114.5
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="this-sample-is-all-you-know-about-the-population-what-can-you-infer-about-the-population-from-this-sample">
<h2>This sample is ALL you know about the population. What can you infer about the population from this sample?<a class="headerlink" href="#this-sample-is-all-you-know-about-the-population-what-can-you-infer-about-the-population-from-this-sample" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">hist_bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">original_sample</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span><span class="o">=</span><span class="n">hist_bins</span><span class="p">)</span>
<span class="n">plots</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Sample Distribution of &#39;</span> <span class="o">+</span> <span class="n">stat_label</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/4_16_0.png" src="../_images/4_16_0.png" />
</div>
</div>
</div>
<div class="section" id="variability-of-the-estimate-quantifying-uncertainty">
<h2>Variability of the Estimate / Quantifying Uncertainty<a class="headerlink" href="#variability-of-the-estimate-quantifying-uncertainty" title="Permalink to this headline">¶</a></h2>
<div class="section" id="since-all-samples-of-the-population-are-likely-to-be-different-there-is-inherent-uncertainty-in-what-we-can-infer-from-a-single-sample-of-the-population">
<h3>Since all samples of the population are likely to be different, there is inherent uncertainty in what we can infer from a single sample of the population.<a class="headerlink" href="#since-all-samples-of-the-population-are-likely-to-be-different-there-is-inherent-uncertainty-in-what-we-can-infer-from-a-single-sample-of-the-population" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="bootstrap">
<h2>Bootstrap<a class="headerlink" href="#bootstrap" title="Permalink to this headline">¶</a></h2>
<div class="section" id="assuming-that-the-sample-is-large-enough-and-that-it-is-representative-of-the-population-you-can-generate-bootstrapped-samples-by-resampling-the-original-sample-with-replacement">
<h3>Assuming that the sample is ” large enough” , and that it is representative of the population, you can generate “bootstrapped” samples by resampling the original sample, WITH replacement.<a class="headerlink" href="#assuming-that-the-sample-is-large-enough-and-that-it-is-representative-of-the-population-you-can-generate-bootstrapped-samples-by-resampling-the-original-sample-with-replacement" title="Permalink to this headline">¶</a></h3>
<p>These new samples can be use to determine the uncertainty that results fom using a sample of a given size to infer something about a population parameter.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Take a bootstrap (re)sample of size sample_size, WITH replacement</span>
<span class="n">boot_sample</span> <span class="o">=</span> <span class="n">original_sample</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">sample_size</span><span class="p">,</span> <span class="n">with_replacement</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">boot_sample</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span> <span class="o">=</span> <span class="n">hist_bins</span><span class="p">)</span>
<span class="n">plots</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribution of a Single Bootstrapped Sample&#39;</span> <span class="p">);</span>

<span class="c1"># print(&quot;Population Median =       &quot;, pop_median)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Our Sample Statistic =       &quot;</span><span class="p">,</span> <span class="n">sample_stat</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Our Sample Statistic =        113.24
</pre></div>
</div>
<img alt="../_images/4_19_1.png" src="../_images/4_19_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bootstrap_stats</span> <span class="o">=</span> <span class="n">make_array</span><span class="p">()</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10000</span><span class="p">):</span>
    <span class="n">new_stat</span> <span class="o">=</span> <span class="n">sample_stat_with_replacement</span><span class="p">(</span><span class="n">original_sample</span><span class="p">)</span>
    <span class="n">bootstrap_stats</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bootstrap_stats</span><span class="p">,</span> <span class="n">new_stat</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="confidence-intervals">
<h1>Confidence Intervals<a class="headerlink" href="#confidence-intervals" title="Permalink to this headline">¶</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Make an interval based on the middle 95% of bootstrap samples</span>
<span class="n">confidence_level</span> <span class="o">=</span> <span class="mi">95</span>

<span class="n">left</span> <span class="o">=</span> <span class="n">percentile</span><span class="p">((</span><span class="mi">100</span> <span class="o">-</span> <span class="n">confidence_level</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">bootstrap_stats</span><span class="p">)</span>
<span class="n">right</span> <span class="o">=</span> <span class="n">percentile</span><span class="p">(</span><span class="mi">50</span> <span class="o">+</span> <span class="n">confidence_level</span><span class="o">/</span><span class="mi">2</span> <span class="p">,</span> <span class="n">bootstrap_stats</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The estimate of the population statistic is between &#39;</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span><span class="s1">&#39; and &#39;</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;This was estimated using a sample of size &#39;</span><span class="p">,</span> <span class="n">sample_size</span><span class="p">,</span> <span class="s1">&#39;and a confidence level of&#39;</span><span class="p">,</span> <span class="n">confidence_level</span><span class="p">,</span><span class="s1">&#39; %&#39;</span><span class="p">)</span>

<span class="c1"># print(left)</span>
<span class="c1"># print(right)</span>

<span class="n">start</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">bootstrap_stats</span><span class="p">))</span>
<span class="n">stop</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">bootstrap_stats</span><span class="p">))</span>
<span class="n">stat_bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">start</span><span class="p">,</span><span class="n">stop</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>

<span class="n">Table</span><span class="p">()</span><span class="o">.</span><span class="n">with_column</span><span class="p">(</span>
    <span class="s1">&#39;Bootstrap &#39;</span> <span class="o">+</span> <span class="n">stat_label</span><span class="p">,</span> <span class="n">bootstrap_stats</span>
<span class="p">)</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="s1">&#39;Bootstrap &#39;</span> <span class="o">+</span> <span class="n">stat_label</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">stat_bins</span><span class="p">)</span>


<span class="n">plots</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;gold&quot;</span><span class="p">,</span><span class="n">lw</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=</span><span class="mi">1</span><span class="p">);</span>
<span class="n">plots</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">sample_stat</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="mi">200</span><span class="p">,</span><span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">);</span>
<span class="n">plots</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">pop_median</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span><span class="n">zorder</span><span class="o">=</span><span class="mi">2</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The estimate of the population statistic is between  110.685  and  115.77
This was estimated using a sample of size  200 and a confidence level of 95  %
</pre></div>
</div>
<img alt="../_images/4_22_1.png" src="../_images/4_22_1.png" />
</div>
</div>
<div class="section" id="repeat-the-process-50-times">
<h2>Repeat the process 50 times<a class="headerlink" href="#repeat-the-process-50-times" title="Permalink to this headline">¶</a></h2>
<p>The average width of all 50 confidence intervals is returned. This might be useful for investigating how the width of the confidence interval depends on sample size, especially for test statistics such as the median, which do not play nicely with the central limit theorem.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># width = make_array()</span>

<span class="c1"># for j in np.arange(50):</span>
    
<span class="c1">#     bootstrap_medians = make_array()</span>
<span class="c1">#     for i in np.arange(1000):</span>
        
<span class="c1">#         new_median = one_bootstrap_median(mySample, myLabel)</span>
<span class="c1">#         bootstrap_medians = np.append(bootstrap_medians, new_median)</span>
        
<span class="c1">#     left = percentile(2.5, bootstrap_medians)</span>
<span class="c1">#     right = percentile(97.5, bootstrap_medians)    </span>
<span class="c1">#     width = np.append(width, right - left)</span>
    
<span class="c1"># print(&#39; The mean width of the 95% confidence intervals for samples of size &#39;, </span>
<span class="c1">#       sample_size, &#39; is &#39;,np.mean(width))</span>
    
</pre></div>
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./tests"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="3.html" title="previous page">23. A/B Testing a Category Variable with 2 Levels</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Robb Sinn<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>